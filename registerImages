#!/usr/bin/python

import os, json
from sys import argv

def getExperimentPath():
    isntDir = lambda p: not os.path.exists(os.path.dirname(path))
    if len(argv) < 2 or isntDir(argv[1]):
        return '.'
    else:
        return os.path.expanduser(argv[1])

def generateJsonPath(path):
    return os.path.join(path, '.metadata.json')

def isInvalidExperimentPath(path):
    jsonPath = generateJsonPath(path)
    if not os.path.exists(jsonPath):
        print "%s not found!" % jsonPath
        return True
    else:
        return False

def main():
    # Load experiment path
    expPath = getExperimentPath()
    if isInvalidExperimentPath(expPath):
        print "Invalid Experiment Path:"
        print expPath
        return
    # Load JSON
    jsonPath = generateJsonPath(expPath)
    dictList = json.load(jsonPath)

    # Run registration pipeline

    # 